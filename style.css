:root {
    --bg-gradient: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
    
    /* Barvy hráčů */
    --p1-color: #fd79a8; /* Pink - Cat */
    --p2-color: #0984e3; /* Blue - Mouse */
    --p3-color: #00b894; /* Green - Fox */
    --p4-color: #fdcb6e; /* Orange - Bear */
    
    --board-bg: rgba(255, 255, 255, 0.95);
    --font-main: 'Quicksand', sans-serif;
    --font-head: 'Fredoka', sans-serif;
}

* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

body {
    font-family: var(--font-main);
    background: var(--bg-gradient);
    min-height: 100vh;
    color: #2d3436;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
}

.glass-morphism {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.6);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.hidden { display: none !important; }
.fade-in { animation: fadeIn 0.5s forwards; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* LOBBY */
#lobby-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255,255,255,0.95);
    display: flex; justify-content: center; align-items: center; z-index: 2000;
}
.lobby-card { padding: 40px; text-align: center; max-width: 450px; width: 90%; }
.lobby-card h1 { font-family: var(--font-head); font-size: 2.5rem; color: #6c5ce7; margin-bottom: 5px; }
.subtitle { letter-spacing: 2px; color: #a29bfe; margin-bottom: 30px; font-weight: bold; }

.btn-lobby { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; font-size: 1.1rem; cursor: pointer; color: white; margin-bottom: 10px; transition: transform 0.2s; }
.btn-lobby:active { transform: scale(0.95); }
.btn-lobby:disabled { background: #b2bec3; cursor: not-allowed; transform: none; box-shadow: none; }

.pink-btn { background: var(--p1-color); box-shadow: 0 5px 15px rgba(253, 121, 168, 0.4); }
.blue-btn { background: var(--p2-color); box-shadow: 0 5px 15px rgba(9, 132, 227, 0.4); }
.green-btn { background: var(--p3-color); box-shadow: 0 5px 15px rgba(0, 184, 148, 0.4); }

.id-box { background: #dfe6e9; padding: 10px; border-radius: 8px; font-family: monospace; font-size: 1.4rem; letter-spacing: 2px; margin: 15px 0; user-select: text; font-weight: bold; color: #2d3436; }
input { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; margin-bottom: 10px; text-align: center; font-size: 1.1rem; }
.divider { margin: 20px 0; color: #b2bec3; font-weight: bold; font-size: 0.8rem; letter-spacing: 2px; }

#player-list { list-style: none; text-align: left; margin: 20px 0; padding: 0; }
#player-list li { padding: 10px; margin-bottom: 5px; border-radius: 8px; font-weight: bold; display: flex; align-items: center; gap: 10px; background: white; border: 1px solid #eee; }
#player-list li.p1 { color: var(--p1-color); border-left: 5px solid var(--p1-color); }
#player-list li.p2 { color: var(--p2-color); border-left: 5px solid var(--p2-color); }
#player-list li.p3 { color: var(--p3-color); border-left: 5px solid var(--p3-color); }
#player-list li.p4 { color: var(--p4-color); border-left: 5px solid var(--p4-color); }

/* GAME UI */
#game-container { max-width: 600px; margin: 0 auto; padding: 10px; height: 100vh; display: flex; flex-direction: column; }

.game-header { padding: 10px 0; }
#players-bar { display: flex; justify-content: space-around; gap: 5px; flex-wrap: wrap; }

.player-badge { 
    display: flex; flex-direction: column; align-items: center; 
    padding: 5px 10px; border-radius: 15px; background: rgba(255,255,255,0.5); 
    opacity: 0.5; transition: 0.3s; min-width: 60px;
}
.player-badge.active { opacity: 1; transform: scale(1.1); background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
.player-badge.p1.active { border: 2px solid var(--p1-color); }
.player-badge.p2.active { border: 2px solid var(--p2-color); }
.player-badge.p3.active { border: 2px solid var(--p3-color); }
.player-badge.p4.active { border: 2px solid var(--p4-color); }
.avatar-icon { font-size: 1.5rem; }
.p-name { font-size: 0.8rem; font-weight: bold; }
.seven-dot { font-size: 0.7rem; color: #6c5ce7; font-weight: bold; margin-top: 2px; }

.turn-indicator { text-align: center; margin-bottom: 10px; font-weight: bold; color: #636e72; font-size: 1.2rem; }

/* BOARD - 11x11 Grid */
.board-wrapper { flex-grow: 1; display: flex; justify-content: center; align-items: center; overflow: hidden; }
.board-frame { padding: 10px; background: var(--board-bg); border-radius: 30px; }

#game-board {
    display: grid;
    grid-template-columns: repeat(11, min(7vw, 32px));
    grid-template-rows: repeat(11, min(7vw, 32px));
    gap: 3px;
}

.cell {
    border-radius: 30%;
    position: relative;
    display: flex; justify-content: center; align-items: center;
}

/* Cesta */
.cell.path { background: #dfe6e9; box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); }

/* Starty */
.cell.start-p1 { background: var(--p1-color); border: 2px dashed white; }
.cell.start-p2 { background: var(--p2-color); border: 2px dashed white; }
.cell.start-p3 { background: var(--p3-color); border: 2px dashed white; }
.cell.start-p4 { background: var(--p4-color); border: 2px dashed white; }

/* Domečky */
.cell.home-p1 { background: #ffeaef; border: 2px solid var(--p1-color); }
.cell.home-p2 { background: #dff9fb; border: 2px solid var(--p2-color); }
.cell.home-p3 { background: #ddfbf5; border: 2px solid var(--p3-color); }
.cell.home-p4 { background: #fff5d7; border: 2px solid var(--p4-color); }

/* Figurky */
.token {
    width: 85%; height: 85%; border-radius: 50%;
    border: 2px solid white; cursor: pointer; z-index: 10;
    display: flex; justify-content: center; align-items: center;
    font-size: 0.9rem;
    box-shadow: 0 3px 5px rgba(0,0,0,0.3);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.token.p1 { background: var(--p1-color); } 
.token.p2 { background: var(--p2-color); }
.token.p3 { background: var(--p3-color); }
.token.p4 { background: var(--p4-color); }

/* KILL EFEKT */
.cell.kill-hint {
    background: #ff7675 !important;
    animation: pulse-red 0.8s infinite;
    border: 2px solid #d63031;
}
@keyframes pulse-red { 0% { transform: scale(0.95); } 50% { transform: scale(1.05); } 100% { transform: scale(0.95); } }

.token.kicked {
    animation: kick-anim 0.5s forwards;
}
@keyframes kick-anim {
    0% { transform: scale(1); }
    50% { transform: scale(1.4) rotate(20deg); opacity: 0.8; }
    100% { transform: scale(0) rotate(180deg); opacity: 0; }
}

/* Highlight pro tah */
.token.highlight {
    animation: bounce 0.8s infinite;
    filter: brightness(1.1);
    z-index: 100;
    border: 3px solid #55efc4;
}
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }

/* Hint pro cílové políčko */
.cell.target-hint {
    background: #55efc4 !important;
    transform: scale(0.8);
    border-radius: 50%;
    opacity: 0.7;
}

/* CONTROLS */
.game-controls {
    padding: 15px; display: flex; align-items: center; gap: 15px;
    position: sticky; bottom: 10px; z-index: 100; margin-top: 10px;
}

.dice-wrapper { width: 50px; height: 50px; perspective: 600px; }
.dice-cube {
    width: 100%; height: 100%; position: relative; transform-style: preserve-3d;
    transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.face {
    position: absolute; width: 50px; height: 50px; background: white;
    border-radius: 8px; display: flex; justify-content: center; align-items: center;
    font-size: 20px; font-weight: bold; color: #2d3436;
    border: 1px solid #ccc;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
}
.front { transform: translateZ(25px); }
.back { transform: rotateY(180deg) translateZ(25px); }
.right { transform: rotateY(90deg) translateZ(25px); }
.left { transform: rotateY(-90deg) translateZ(25px); }
.top { transform: rotateX(90deg) translateZ(25px); }
.bottom { transform: rotateX(-90deg) translateZ(25px); }
.seven { /* Skrytá, dokud nepadne 7 */
    display: none; transform: translateZ(0); background: #6c5ce7; color: white; border-radius: 50%;
    width: 100%; height: 100%; z-index: 50;
}
.dice-cube.show-seven .face { opacity: 0; } /* Skryj ostatní */
.dice-cube.show-seven .seven { display: flex; opacity: 1; animation: spin-seven 1s infinite linear; }
@keyframes spin-seven { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.action-area { flex-grow: 1; display: flex; flex-direction: column; align-items: center; }
.btn-action {
    background: #2d3436; color: white; border: none; padding: 12px 30px;
    border-radius: 50px; font-weight: bold; font-size: 1rem;
    box-shadow: 0 6px 0 #636e72; cursor: pointer; transition: 0.1s;
    width: 100%; max-width: 200px;
}
.btn-action:active { transform: translateY(4px); box-shadow: 0 3px 0 #636e72; }
.btn-action:disabled { background: #b2bec3; box-shadow: none; transform: translateY(4px); color: #dfe6e9; }
.btn-action span.small { display: block; font-size: 0.7rem; opacity: 0.8; font-weight: normal; }

#powerup-indicator {
    color: #6c5ce7; font-weight: 800; margin-bottom: 5px; font-size: 0.9rem;
    animation: pulse-text 1s infinite;
}
#magic-counter { font-size: 0.8rem; font-weight: bold; color: #636e72; margin-bottom: 5px; }

@keyframes pulse-text { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
