:root {
    --p1: #ff7675; --p2: #0984e3; --p3: #00b894; --p4: #fdcb6e;
    --bg: #f1f2f6;
}

* { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }

body {
    font-family: sans-serif;
    background: var(--bg);
    height: 100vh;
    overflow: hidden; /* Na mobilu app-like feel */
    display: flex; flex-direction: column;
}

/* LOBBY */
#lobby-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: white; z-index: 1000;
    display: flex; justify-content: center; align-items: center;
    overflow-y: auto;
}
.lobby-card { padding: 20px; text-align: center; width: 90%; max-width: 400px; }
.btn-lobby { width: 100%; padding: 15px; margin: 5px 0; border: none; border-radius: 8px; color: white; font-weight: bold; font-size: 1rem; cursor: pointer; }
.pink { background: var(--p1); } .blue { background: var(--p2); } .green { background: var(--p3); }
.divider { margin: 10px 0; color: #aaa; }
.id-box { background: #eee; padding: 10px; font-family: monospace; font-size: 1.2rem; margin: 10px 0; user-select: text; }
.hidden { display: none !important; }

/* HRA */
#game-container {
    flex: 1; display: flex; flex-direction: column;
    max-width: 600px; margin: 0 auto; width: 100%;
    padding: 10px;
}

/* PLAYERS BAR */
#players-bar { display: flex; justify-content: space-around; padding: 10px 0; }
.p-badge { 
    padding: 5px 10px; border-radius: 15px; background: #ddd; opacity: 0.5; 
    display: flex; flex-direction: column; align-items: center;
}
.p-badge.active { opacity: 1; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); transform: scale(1.1); }
.p-badge.p1.active { border: 2px solid var(--p1); }
.p-badge.p2.active { border: 2px solid var(--p2); }
.p-badge.p3.active { border: 2px solid var(--p3); }
.p-badge.p4.active { border: 2px solid var(--p4); }

.status-bar { text-align: center; font-weight: bold; margin: 5px 0; color: #555; }

/* DESKA */
.board-wrapper { flex: 1; display: flex; justify-content: center; align-items: center; }
#game-board {
    display: grid;
    grid-template-columns: repeat(11, 1fr);
    grid-template-rows: repeat(11, 1fr);
    gap: 2px;
    width: 100%; aspect-ratio: 1/1;
    max-height: 50vh; /* Aby se vešla */
    background: white; padding: 5px; border-radius: 10px;
}

.cell { border-radius: 30%; position: relative; display: flex; justify-content: center; align-items: center; }
.cell.path { background: #eee; }
.cell.special { background: #a29bfe; border: 1px solid white; } 

/* Barvy políček */
.start-0 { background: var(--p1); opacity: 0.3; }
.start-1 { background: var(--p2); opacity: 0.3; }
.start-2 { background: var(--p3); opacity: 0.3; }
.start-3 { background: var(--p4); opacity: 0.3; }
.home-0 { background: #ffeaa7; border: 1px solid var(--p1); }
.home-1 { background: #81ecec; border: 1px solid var(--p2); }
.home-2 { background: #55efc4; border: 1px solid var(--p3); }
.home-3 { background: #fab1a0; border: 1px solid var(--p4); }

/* FIGURKY */
.token {
    width: 80%; height: 80%; border-radius: 50%; border: 2px solid white;
    z-index: 10; cursor: pointer; display: flex; justify-content: center; align-items: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3); transition: transform 0.2s;
}
.token.p1 { background: var(--p1); }
.token.p2 { background: var(--p2); }
.token.p3 { background: var(--p3); }
.token.p4 { background: var(--p4); }
.token.highlight { border: 3px solid lime; transform: scale(1.2); z-index: 100; animation: bounce 1s infinite; }

@keyframes bounce { 0%, 100% { transform: scale(1.2) translateY(0); } 50% { transform: scale(1.2) translateY(-5px); } }

/* OVLÁDÁNÍ */
.controls-area {
    background: white; padding: 15px; border-radius: 20px 20px 0 0;
    display: flex; align-items: center; gap: 20px;
    box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
}

.dice-container { width: 50px; height: 50px; perspective: 400px; }
.cube { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform 0.5s; }
.face {
    position: absolute; width: 50px; height: 50px; background: white; border: 1px solid #ccc;
    display: flex; justify-content: center; align-items: center; font-size: 20px; font-weight: bold;
}
.front { transform: translateZ(25px); }
.back { transform: rotateY(180deg) translateZ(25px); }
.right { transform: rotateY(90deg) translateZ(25px); }
.left { transform: rotateY(-90deg) translateZ(25px); }
.top { transform: rotateX(90deg) translateZ(25px); }
.bottom { transform: rotateX(-90deg) translateZ(25px); }
.seven { background: #6c5ce7; color: white; display: none; transform: translateZ(26px); } /* Nad ostatní */
.cube.show-7 .seven { display: flex; width:100%; height:100%; border-radius: 5px; }

.buttons { flex: 1; text-align: center; }
.action-btn {
    width: 100%; padding: 15px; background: #333; color: white; border: none;
    border-radius: 30px; font-size: 1.1rem; font-weight: bold;
}
.action-btn:disabled { background: #ccc; }
#magic-info { color: #6c5ce7; font-weight: bold; margin-bottom: 5px; }
